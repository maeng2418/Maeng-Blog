"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[334],{4098:function(e,t,n){n.d(t,{Z:function(){return h}});var r=n(2784),i=n(6293);const o=e=>!e||0===Object.keys(e).length,a=(e,t)=>{if(o(e))return null;const n=e.getItem(t);return n?JSON.parse(n):null},s=(e,t,n)=>o(e)?null:e.setItem(t,JSON.stringify(n)),u="undefined"!=typeof window?window.localStorage:void 0,c="undefined"!=typeof window?window.sessionStorage:void 0,d=((0,i.r$)(s,u),(0,i.r$)(a,u),(0,i.r$)(s,c)),l=(0,i.r$)(a,c),f="__maeng_blog_session_storage_key__";var h=()=>{const e=(t=1,l(f+"/count")||t);var t;const{0:n,1:i}=(0,r.useState)(e),o=(0,r.useRef)(n),a=(0,r.useCallback)((()=>i((e=>e+1))),[]);return(0,r.useEffect)((()=>{o.current=n,d(f+"/count",n)}),[n]),[n,o,a]}},1090:function(e,t,n){var r=n(2784);t.Z=e=>{(0,r.useEffect)((()=>(window.addEventListener("scroll",e,{passive:!1}),()=>{window.removeEventListener("scroll",e)})),[])}},6986:function(e,t,n){n.r(t),n.d(t,{default:function(){return x}});var r=n(2784),i=n(7496),o=n(1892),a=n(4098),s=n(245),u=n(1090),c=n(1653),d=n(3966),l=function(){function e(){}return e.prototype.expandToken=function(e){for(var t=[],n="",r=0,i=e.length;r<i;++r)n+=e.charAt(r),t.push(n);return t},e}(),f=function(){function e(){}return e.prototype.sanitize=function(e){return e?e.toLocaleLowerCase().trim():""},e}();function h(e,t){t=t||[];for(var n=e=e||{},r=0;r<t.length;r++)if(null==(n=n[t[r]]))return null;return n}var _=function(){function e(e){this._uidFieldName=e,this._tokenToIdfCache={},this._tokenMap={}}var t=e.prototype;return t.indexDocument=function(e,t,n){this._tokenToIdfCache={};var r,i=this._tokenMap;"object"!=typeof i[e]?i[e]=r={$numDocumentOccurrences:0,$totalNumOccurrences:1,$uidMap:{}}:(r=i[e]).$totalNumOccurrences++;var o=r.$uidMap;"object"!=typeof o[t]?(r.$numDocumentOccurrences++,o[t]={$document:n,$numTokenOccurrences:1}):o[t].$numTokenOccurrences++},t.search=function(e,t){for(var n={},r=0,i=e.length;r<i;r++){var o=e[r],a=this._tokenMap[o];if(!a)return[];if(0===r)for(var s=0,u=(c=Object.keys(a.$uidMap)).length;s<u;s++){n[d=c[s]]=a.$uidMap[d].$document}else{var c;for(s=0,u=(c=Object.keys(n)).length;s<u;s++){var d=c[s];"object"!=typeof a.$uidMap[d]&&delete n[d]}}}var l=[];for(var d in n)l.push(n[d]);var f=this._createCalculateTfIdf();return l.sort((function(n,r){return f(e,r,t)-f(e,n,t)}))},t._createCalculateIdf=function(){var e=this._tokenMap,t=this._tokenToIdfCache;return function(n,r){if(!t[n]){var i=void 0!==e[n]?e[n].$numDocumentOccurrences:0;t[n]=1+Math.log(r.length/(1+i))}return t[n]}},t._createCalculateTfIdf=function(){var e=this._tokenMap,t=this._uidFieldName,n=this._createCalculateIdf();return function(r,i,o){for(var a=0,s=0,u=r.length;s<u;++s){var c,d=r[s],l=n(d,o);l===1/0&&(l=0),c=t instanceof Array?i&&h(i,t):i&&i[t],a+=(void 0!==e[d]&&void 0!==e[d].$uidMap[c]?e[d].$uidMap[c].$numTokenOccurrences:0)*l}return a}},e}(),g=/[^a-zа-яё0-9\-']+/i,m=function(){function e(){}return e.prototype.tokenize=function(e){return e.split(g).filter((function(e){return e}))},e}();function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var v=function(){function e(e){if(!e)throw Error("js-search requires a uid field name constructor parameter");this._uidFieldName=e,this._indexStrategy=new l,this._searchIndex=new _(e),this._sanitizer=new f,this._tokenizer=new m,this._documents=[],this._searchableFields=[]}var t,n,r,i=e.prototype;return i.addDocument=function(e){this.addDocuments([e])},i.addDocuments=function(e){this._documents=this._documents.concat(e),this.indexDocuments_(e,this._searchableFields)},i.addIndex=function(e){this._searchableFields.push(e),this.indexDocuments_(this._documents,[e])},i.search=function(e){var t=this._tokenizer.tokenize(this._sanitizer.sanitize(e));return this._searchIndex.search(t,this._documents)},i.indexDocuments_=function(e,t){this._initialized=!0;for(var n=this._indexStrategy,r=this._sanitizer,i=this._searchIndex,o=this._tokenizer,a=this._uidFieldName,s=0,u=e.length;s<u;s++){var c,d=e[s];c=a instanceof Array?h(d,a):d[a];for(var l=0,f=t.length;l<f;l++){var _,g=t[l];if(null!=(_=g instanceof Array?h(d,g):d[g])&&"string"!=typeof _&&_.toString&&(_=_.toString()),"string"==typeof _)for(var m=o.tokenize(r.sanitize(_)),p=0,v=m.length;p<v;p++)for(var k=m[p],y=n.expandToken(k),w=0,x=y.length;w<x;w++){var z=y[w];i.indexDocument(z,c,d)}}}},t=e,(n=[{key:"indexStrategy",set:function(e){if(this._initialized)throw Error("IIndexStrategy cannot be set after initialization");this._indexStrategy=e},get:function(){return this._indexStrategy}},{key:"sanitizer",set:function(e){if(this._initialized)throw Error("ISanitizer cannot be set after initialization");this._sanitizer=e},get:function(){return this._sanitizer}},{key:"searchIndex",set:function(e){if(this._initialized)throw Error("ISearchIndex cannot be set after initialization");this._searchIndex=e},get:function(){return this._searchIndex}},{key:"tokenizer",set:function(e){if(this._initialized)throw Error("ITokenizer cannot be set after initialization");this._tokenizer=e},get:function(){return this._tokenizer}}])&&p(t.prototype,n),r&&p(t,r),e}(),k=n(103);var y=n(4472),w=n(2322);var x=e=>{let{data:{site:{siteMetadata:{configs:{countOfInitialPost:t}}}}}=e;const{params:n}=(0,d.Z)(),{data:l}=(()=>{const{params:e}=(0,d.Z)(),{0:t,1:n}=(0,r.useState)([]),{allMarkdownRemark:i}=(0,k.useStaticQuery)("2167568426"),o=(0,r.useMemo)((()=>i.edges.map((e=>{let{node:t}=e;return{id:t.id,title:t.frontmatter.title,excerpt:t.excerpt,slug:t.fields.slug,content:t.html.replace(/(<([^>]+)>)/gi,"")}}))),[i.edges]),a=(0,r.useMemo)((()=>new v("id")),[]);return a.addIndex("title"),a.addIndex("excerpt"),a.addIndex("content"),a.addDocuments(o),(0,r.useEffect)((()=>{if(e.keyword){const t=a.search(e.keyword);n(t)}else n([])}),[a,e.keyword]),{data:t}})(),[f,h,_]=(0,a.Z)(),g=(0,r.useCallback)((e=>s.Ti()-e),[]);(0,o.Z)((e=>e.filter((e=>{let{isIntersecting:t}=e;return t})).forEach((e=>{let{target:t}=e;return(0,s.cn)(t,"observed-shown")}))),{root:(0,s.sb)(y.KD),rootMargin:y.yb,threshold:y.R5}),(0,u.Z)((()=>{const e=window.scrollY+window.innerHeight,n=()=>g(e)<y.M6;return(0,c.G)(_,{dismissCondition:()=>!n(),triggerCondition:()=>n()&&l.length>h.current*t})()}));const m=(0,r.useMemo)((()=>l.slice(0,f*t)),[l,f,t]);return(0,w.jsxs)("div",{children:[(0,w.jsx)("h1",{className:"text-xl font-bold mx-12 text-center",children:l.length>0?'"'+n.keyword+'" 에 대해 총 '+l.length+"건이 검색되었습니다.":'"'+n.keyword+'" 에 대한 검색 결과가 없습니다.'}),(0,w.jsx)(i.p_,{posts:m})]})}},1653:function(e,t,n){n.d(t,{G:function(){return r}});const r=(e,t)=>{let{dismissCondition:n=(()=>!1),triggerCondition:r=(()=>!0)}=t;if(!e)throw Error("Invalid required arguments");let i=!1;return()=>i?null:(i=!0,requestAnimationFrame((()=>n()?(i=!1,null):r()?(i=!1,e()):null)))}}}]);
//# sourceMappingURL=component---src-pages-search-tsx-595159cb16479f8c5bad.js.map